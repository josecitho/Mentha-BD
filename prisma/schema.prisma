generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  password  String
  nombre    String
  rol       String   @default("staff")
  activo    Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Cliente {
  id        Int      @id @default(autoincrement())
  nombre    String
  apellido  String
  email     String   @unique
  telefono  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  citas     Cita[]
}

model Servicio {
  id               Int      @id @default(autoincrement())
  nombre           String
  descripcion      String?
  duracion_minutos Int
  precio           Float
  activo           Boolean  @default(true)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  citas            Cita[]
}

model Cita {
  id          Int      @id @default(autoincrement())
  cliente_id  Int
  servicio_id Int
  fecha_hora  DateTime
  estado      String   @default("pendiente")
  notas       String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  servicio    Servicio @relation(fields: [servicio_id], references: [id], onDelete: Cascade)
  cliente     Cliente  @relation(fields: [cliente_id], references: [id], onDelete: Cascade)
  
  @@index([cliente_id])
  @@index([servicio_id])
}
